<h1>Your Stall Orders</h1>

{% for order in orders %}
<div style="border:1px solid #38bdf8; padding:15px; margin:15px; border-radius:10px;">

    <p><strong>Order ID:</strong> {{ order.id }}</p>
    <p><strong>Student:</strong> {{ order.user.username }}</p>
    <p><strong>Total:</strong> ₹ {{ order.total_price }}</p>
    <p><strong>Time Slot:</strong> {{ order.time_slot }}</p>
    <p><strong>Status:</strong> {{ order.status }}</p>
    <p><strong>Created:</strong> {{ order.created_at }}</p>

    <h4>Items:</h4>
    <ul>
        {% for item in order.orderitem_set.all %}
            <li>
                {{ item.menu_item.name }} —
                Qty: {{ item.quantity }} —
                ₹ {{ item.subtotal }}
            </li>
        {% endfor %}
    </ul>

    {% if order.status == "Pending" %}
    <a href="{% url 'update_order_status' order.id 'Confirmed' %}">Accept</a>
    <a href="{% url 'update_order_status' order.id 'Rejected' %}">Reject</a>
{% elif order.status == "Confirmed" %}
    <a href="{% url 'update_order_status' order.id 'Completed' %}">Mark Completed</a>
{% endif %}

</div>

{% empty %}
<p>No orders yet.</p>
{% endfor %}