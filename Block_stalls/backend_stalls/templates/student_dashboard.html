<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Dashboard</title>
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e3a8a 100%);
            color: #fff;
            padding: 40px;
        }

        .stat-card {
            background: rgba(30, 58, 138, 0.6);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .orders-list {
            margin-top: 30px;
        }

        .order-item {
            background: rgba(30, 58, 138, 0.6);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
        }

        .status-pending {
            color: #fbbf24;
        }

        .status-confirmed {
            color: #22c55e;
        }

        .status-completed {
            color: #22c55e;
        }

        .order-price {
            font-weight: bold;
        }
    </style>
</head>
<body>

<div style="display:flex; justify-content:space-between; align-items:center;">
    <h1>My Dashboard</h1>

    <a href="{% url 'student_dashboard' %}" style="position:relative; margin-right:20px; text-decoration:none; font-size:20px;">
    üîî
    {% if global_notifications > 0 %}
        <span style="
            position:absolute;
            top:-8px;
            right:-12px;
            background:red;
            color:white;
            font-size:12px;
            padding:3px 7px;
            border-radius:50%;
            font-weight:bold;
        ">
            {{ global_notifications }}
        </span>
    {% endif %}
</a>
</div>

<div class="stat-card">
    <p>Total Orders: {{ total_orders }}</p>
    <p>Total Spent: ‚Çπ {{ total_spent }}</p>
    <p>Pending Orders: {{ pending_orders }}</p>
</div>

<h2>Recent Orders</h2>

<div class="orders-list">

{% if orders %}
    {% for order in orders %}
        <div class="order-item">
            <div>
                <p><strong>Order #{{ order.id }}</strong></p>
                <p>Stall: {{ order.stall.name }}</p>
                <p>Pickup Slot: {{ order.time_slot }}</p>
                <p>Date: {{ order.created_at }}</p>
            </div>

            <div>
                <p class="
                    {% if order.status == 'Pending' %}status-pending
                    {% elif order.status == 'Confirmed' %}status-confirmed
                    {% elif order.status == 'Completed' %}status-completed
                    {% endif %}
                ">
                    {% if order.status == 'Confirmed' %}
                        ‚úÖ Your order is confirmed
                    {% elif order.status == 'Completed' %}
                        üéâ Completed
                    {% else %}
                        ‚è≥ Pending
                    {% endif %}
                </p>

                <p class="order-price">‚Çπ {{ order.total_price }}</p>
            </div>
        </div>
    {% endfor %}
{% else %}
    <p>No orders yet.</p>
{% endif %}

</div>

<a href="{% url 'blocks' %}">Order More</a> |
<a href="{% url 'logout' %}">Logout</a>

</body>
</html>